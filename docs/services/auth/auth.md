# Auth Service

**Задача:**
Реализация сервиса авторизации и регистрации пользователей.

* * *

## Архитектура сервиса:
![Auth_Architecture](./architecture/auth_0_0_1.png)

## Основные компоненты сервиса + зоны ответственности:
### Client:
**Web-Interface**:
- UI-интерфейс кинотеатра;

### Backend:
**Nginx**:
- Веб-сервер;
- Балансировка нагрузки;
- Документация: https://nginx.org/;

**Auth_Service**:
- Авторизация пользователей;
- Вход в систему и выход из системы пользователем;
- Работа с jwt-токенами пользователей;
- Работа с ролями пользователей (IdMS);
- Используемые решения:
- - FastAPI: https://fastapi.tiangolo.com/;
- - Pydantic: https://docs.pydantic.dev/latest/;
- - Система авторизации JWT (JSON Web Token): https://datatracker.ietf.org/doc/html/rfc7519
- Шифрование данных: # TODO:
- Хеширование данных: # TODO:

**AuthDB**:
- Реляционная база данных для хранения основной информации по пользователям;
- Используемые решения:
- - PostgreSQL: https://www.postgresql.org/;

**AuthTokenDB**:
- NoSQL база данных, хранящая токены пользователей в формате "ключ-значение";
- Используемые решения:
- - Redis: https://redis.io/;

## Требования:
### Функциональные:
- Регистрация пользователя;
- Вход в систему пользователем;
- Выход из системы пользователем;

### Нефункциональные:
- **Availability**(доступность системы):
- - SLA(Service Level Agreement): 99%;
- **Reliability**(надежность системы): >= 85%;
- **Fault Tolerance**(отказоустойчивость системы):
- - Механизмы быстрого восстановления после сбоев;
- - "Умная деградация" системы в случае сбоя одного из компонентов (RedisDB, PostgresDB);

## Архитектурное представление API:
### Регистрация/создание пользователя:
![User registry](architecture/auth_registry_user_0_0_1.png)